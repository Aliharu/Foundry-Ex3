<form class="{{cssClass}}" autocomplete="off">
    <header class="sheet-header">
        <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" />
        <div class="header-fields">
            <h1 class="charname"><input name="name" type="text" value="{{item.name}}" placeholder="Name" /></h1>
            <div>
                <label class="resource-label">{{localize "Ex3.Ability"}}: </label>
                <select name="system.ability" data-type="String">
                    {{#select system.ability}}
                    {{#each charmAbilityList as |label ability|}}
                    <option value="{{ability}}">{{localize label}}</option>
                    {{/each}}
                    {{/select}}
                </select>
                <select name="system.requirement" data-type="String">
                    {{#select system.requirement}}
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    {{/select}}
                </select>
                <label class="resource-label">{{localize "Ex3.Essence"}}: </label>
                <select name="system.essence" data-type="String">
                    {{#select system.essence}}
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    {{/select}}
                </select>
            </div>
        </div>
    </header>

    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="description">{{localize "Ex3.Description"}}</a>
        <a class="item" data-tab="costs">{{localize "Ex3.Costs"}}</a>
        <a class="item" data-tab="bonuses">{{localize "Ex3.Dice"}}</a>
        <a class="item" data-tab="macros">{{localize "Ex3.Macros"}}</a>
        <a class="item" data-tab="other">{{localize "Ex3.Other"}}</a>
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">

        {{!-- Description Tab --}}
        <div class="tab" data-group="primary" data-tab="description">
            <div class="grid grid-2col flex-group-center">
                <div>
                    <div class="resource-label">{{localize "Ex3.Type"}}</div>
                    <input type="text" name="system.type" value="{{system.type}}" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Duration"}}</div>
                    <input type="text" name="system.duration" value="{{system.duration}}" />
                </div>
            </div>
            <div class="flex-center mt-1">
                <div class="resource-label">{{localize "Ex3.Keywords"}} <a><i
                            class="fas fa-info-circle charms-cheat-sheet cursor-pointer"></i></a></div>
            </div>
            <input type="text" name="system.keywords" value="{{system.keywords}}" />
            <div class="flex-center mt-1">
                <div class="resource-label">{{localize "Ex3.CharmPrerequisites"}}</div>
            </div>
            <div class="embeded-item-list-wrapper" {{#if
                options.editable}}style="border: 1px solid var(--color-border-light-tertiary);" {{/if}}>
                <div class="flex-group-center embeded-item-list">
                    <ul>
                        {{#if options.editable}}
                        {{#each system.charmprerequisites as |item id|}}
                        <a draggable="true" class="embeded-item-pill" data-id="{{item.id}}"
                            data-item-name="{{item.name}}" data-item-index="{{id}}">
                            <li data-item-index="{{id}}">
                                {{item.name}}
                                <i class="fas fa-trash embeded-item-delete"></i>
                            </li>
                        </a>
                        {{/each}}
                        {{else}}
                        {{#each system.charmprerequisites as |item id|}}
                        <li class="embeded-item-pill" data-item-name="{{../name}}" data-item-index="{{id}}">
                            {{item.name}}
                        </li>
                        {{/each}}
                        {{/if}}
                    </ul>
                </div>
            </div>
            <div class="flex-center mt-1">
                <div class="resource-label">{{localize "Ex3.OtherPrerequisites"}}</div>
            </div>
            <input class="mb-1" type="text" name="system.prerequisites" value="{{system.prerequisites}}" />
            <div class="flex-center">
                <div class="resource-label">{{localize "Ex3.Description"}}</div>
            </div>
            {{editor descriptionHTML target="system.description" button=true editable=editable engine="prosemirror"}}
        </div>

        <div class="tab" data-group="primary" data-tab="costs">
            <div class="d-flex flex-center resources">
                <div>
                    <div class="resource-label">{{localize "Ex3.Motes"}}</div>
                    <input type="number" name="system.cost.motes" value="{{system.cost.motes}}" data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.CommitM"}}</div>
                    <input type="number" name="system.cost.commitmotes" value="{{system.cost.commitmotes}}"
                        data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Initiative"}}</div>
                    <input type="number" name="system.cost.initiative" value="{{system.cost.initiative}}"
                        data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Anima"}}</div>
                    <input type="number" name="system.cost.anima" value="{{system.cost.anima}}" data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Willpower"}}</div>
                    <input type="number" name="system.cost.willpower" value="{{system.cost.willpower}}"
                        data-dtype="Number" />
                </div>
            </div>
            <div class="grid grid-4col flex-group-center">
                <div>
                    <div class="resource-label">{{localize "Ex3.Health"}}</div>
                    <input type="number" name="system.cost.health" value="{{system.cost.health}}" data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.HealthType"}}</div>
                    <select name="system.cost.healthtype" data-type="String">
                        {{#select system.cost.healthtype}}
                        <option value="bashing">{{localize "Ex3.Bashing"}}</option>
                        <option value="lethal">{{localize "Ex3.Lethal"}}</option>
                        <option value="aggravated">{{localize "Ex3.Aggravated"}}</option>
                        {{/select}}
                    </select>
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Aura"}}</div>
                    <select name="system.cost.aura" data-type="String">
                        {{#select system.cost.aura}}
                        <option value=""></option>
                        <option value="any">{{localize "Ex3.Any"}}</option>
                        <option value="air">{{localize "Ex3.Air"}}</option>
                        <option value="earth">{{localize "Ex3.Earth"}}</option>
                        <option value="fire">{{localize "Ex3.Fire"}}</option>
                        <option value="water">{{localize "Ex3.Water"}}</option>
                        <option value="wood">{{localize "Ex3.Wood"}}</option>
                        {{/select}}
                    </select>
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.XP"}}</div>
                    <input type="number" name="system.cost.xp" value="{{system.cost.xp}}" data-dtype="Number" />
                </div>
            </div>
            <div class="flex-center">
                <div class="resource-label">{{localize "Ex3.Craft"}} {{localize "Ex3.Cost"}}</div>
            </div>
            <div class="grid grid-3col flex-group-center">
                <div>
                    <div class="resource-label">{{localize "Ex3.Silver"}}</div>
                    <input type="number" name="system.cost.silverxp" value="{{system.cost.silverxp}}"
                        data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Gold"}}</div>
                    <input type="number" name="system.cost.goldxp" value="{{system.cost.goldxp}}" data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.White"}}</div>
                    <input type="number" name="system.cost.whitexp" value="{{system.cost.whitexp}}"
                        data-dtype="Number" />
                </div>
            </div>
            <div class="flex-center">
                <div class="resource-label">{{localize "Ex3.Restore"}}</div>
            </div>
            <div class="grid grid-3col flex-group-center">
                <div>
                    <div class="resource-label">{{localize "Ex3.Motes"}}</div>
                    <input type="number" name="system.restore.motes" value="{{system.restore.motes}}"
                        data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Willpower"}}</div>
                    <input type="number" name="system.restore.willpower" value="{{system.restore.willpower}}"
                        data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Health"}}</div>
                    <input type="number" name="system.restore.health" value="{{system.restore.health}}"
                        data-dtype="Number" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.Initiative"}}</div>
                    <input type="number" name="system.restore.initiative" value="{{system.restore.initiative}}"
                        data-dtype="Number" />
                </div>
            </div>
        </div>

        <div class="tab" data-group="primary" data-tab="bonuses">
            <div class="resource flex-center mb-1" style="font-size: 17px;">
                <label class="resource-label">{{localize "Ex3.DiceRollModifiers"}} <a><i
                            class="formula-help fas fa-info-circle"></i></label></a></label>
            </div>
            <div class="d-flex flex-center resource-label">
                <div class="resource-label">{{localize "Ex3.DiceRollBonus"}}</div>
                <input name="system.diceroller.enabled" value="system.diceroller.enabled" type="checkbox" {{checked
                    system.diceroller.enabled}}>
            </div>
            <div>
                <div class="resource grid grid-3col flex-center">
                    <div>
                        <label class="resource-label"><a class="toggle-charm-dice"><i
                                    class="fa-solid fa-circle-check non-charm-dice" title="Toggle Non-Charm"></i></a>
                            {{localize "Ex3.DiceBonus"}}*</label>
                        <input name="system.diceroller.bonusdice" value="{{system.diceroller.bonusdice}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label"><a class="toggle-charm-successes"><i
                                    class="fa-solid fa-circle-check non-charm-successes"
                                    title="Toggle Non-Charm"></i></a> {{localize "Ex3.SuccessBonus"}}*</label>
                        <input name="system.diceroller.bonussuccesses" value="{{system.diceroller.bonussuccesses}}"
                            type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.DecreaseTargetNumber"}}</label>
                        <input name="system.diceroller.decreasetargetnumber"
                            value="{{system.diceroller.decreasetargetnumber}}" type="number">
                    </div>

                    <div>
                        <label class="resource-label">{{localize "Ex3.DoubleSuccess"}} +</label>
                        <input name="system.diceroller.doublesuccess" value="{{system.diceroller.doublesuccess}}"
                            type="number">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.RerollNumDice"}}*</label>
                        <input name="system.diceroller.rerolldice" value="{{system.diceroller.rerolldice}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.DicetoSuccesses"}}*</label>
                        <input name="system.diceroller.diceToSuccesses" value="{{system.diceroller.diceToSuccesses}}"
                            type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.ReduceDifficulty"}}*</label>
                        <input name="system.diceroller.reducedifficulty" value="{{system.diceroller.reducedifficulty}}"
                            type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.RerollFailed"}}</label>
                        <div>
                            <input type="checkbox" name="system.diceroller.rerollfailed"
                                value="system.diceroller.rerollfailed" {{checked system.diceroller.rerollfailed}}>
                        </div>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.RollTwiceKeepHighest"}}</label>
                        <div>
                            <input type="checkbox" name="system.diceroller.rolltwice"
                                value="system.diceroller.rolltwice" {{checked system.diceroller.rolltwice}}>
                        </div>
                    </div>
                </div>
            </div>

            <div class="resource flex-center">
                <label class="resource-label">{{localize "Ex3.Reroll"}}</label>
            </div>
            <div class="resource d-flex flex-center">
                <div>
                    <div>1</div>
                    <input name="system.diceroller.reroll.one" value="system.diceroller.reroll.one" type="checkbox"
                        {{checked system.diceroller.reroll.one}}>
                </div>
                <div>
                    <div>2</div>
                    <input name="system.diceroller.reroll.two" value="system.diceroller.reroll.two" type="checkbox"
                        {{checked system.diceroller.reroll.two}}>
                </div>
                <div>
                    <div>3</div>
                    <input name="system.diceroller.reroll.three" value="system.diceroller.reroll.three" type="checkbox"
                        {{checked system.diceroller.reroll.three}}>
                </div>
                <div>
                    <div>4</div>
                    <input name="system.diceroller.reroll.four" value="system.diceroller.reroll.four" type="checkbox"
                        {{checked system.diceroller.reroll.four}}>
                </div>
                <div>
                    <div>5</div>
                    <input name="system.diceroller.reroll.five" value="system.diceroller.reroll.five" type="checkbox"
                        {{checked system.diceroller.reroll.five}}>
                </div>
                <div>
                    <div>6</div>
                    <input name="system.diceroller.reroll.six" value="system.diceroller.reroll.six" type="checkbox"
                        {{checked system.diceroller.reroll.six}}>
                </div>
                <div>
                    <div>7</div>
                    <input name="system.diceroller.reroll.seven" value="system.diceroller.reroll.seven" type="checkbox"
                        {{checked system.diceroller.reroll.seven}}>
                </div>
                <div>
                    <div>8</div>
                    <input name="system.diceroller.reroll.eight" value="system.diceroller.reroll.eight" type="checkbox"
                        {{checked system.diceroller.reroll.eight}}>
                </div>
                <div>
                    <div>9</div>
                    <input name="system.diceroller.reroll.nine" value="system.diceroller.reroll.nine" type="checkbox"
                        {{checked system.diceroller.reroll.nine}}>
                </div>
                <div>
                    <div>10</div>
                    <input name="system.diceroller.reroll.ten" value="system.diceroller.reroll.ten" type="checkbox"
                        {{checked system.diceroller.reroll.ten}}>
                </div>
            </div>
            <div class="resource flex-center">
                <label class="resource-label">{{localize "Ex3.RerollsCap"}}* <i
                        title="Effects 'Rerolls 6s' style rerolls, 0 means no cap"
                        class="fas fa-info-circle"></i></label>
            </div>
            <div class="resource d-flex flex-center mb-1">
                <div class="resource d-flex flex-center">
                    <div>
                        <div>1</div>
                        <input name="system.diceroller.rerollcap.one" value="{{system.diceroller.rerollcap.one}}"
                            type="text">
                    </div>
                    <div>
                        <div>2</div>
                        <input name="system.diceroller.rerollcap.two" value="{{system.diceroller.rerollcap.two}}"
                            type="text">
                    </div>
                    <div>
                        <div>3</div>
                        <input name="system.diceroller.rerollcap.three" value="{{system.diceroller.rerollcap.three}}"
                            type="text">
                    </div>
                    <div>
                        <div>4</div>
                        <input name="system.diceroller.rerollcap.four" value="{{system.diceroller.rerollcap.four}}"
                            type="text">
                    </div>
                    <div>
                        <div>5</div>
                        <input name="system.diceroller.rerollcap.five" value="{{system.diceroller.rerollcap.five}}"
                            type="text">
                    </div>
                    <div>
                        <div>6</div>
                        <input name="system.diceroller.rerollcap.six" value="{{system.diceroller.rerollcap.six}}"
                            type="text">
                    </div>
                    <div>
                        <div>7</div>
                        <input name="system.diceroller.rerollcap.seven" value="{{system.diceroller.rerollcap.seven}}"
                            type="text">
                    </div>
                    <div>
                        <div>8</div>
                        <input name="system.diceroller.rerollcap.eight" value="{{system.diceroller.rerollcap.eight}}"
                            type="text">
                    </div>
                    <div>
                        <div>9</div>
                        <input name="system.diceroller.rerollcap.nine" value="{{system.diceroller.rerollcap.nine}}"
                            type="text">
                    </div>
                    <div>
                        <div>10</div>
                        <input name="system.diceroller.rerollcap.ten" value="{{system.diceroller.rerollcap.ten}}"
                            type="text">
                    </div>
                </div>
            </div>
            <div class="resource flex-center">
                <label class="resource-label">{{localize "Ex3.DoubleSuccessCap"}}*</label>
            </div>
            <div class="resource grid grid-4col flex-center">
                <div>
                    <label class="resource-label">{{localize "Ex3.Sevens"}}</label>
                    <input name="system.diceroller.doublesucccesscaps.sevens"
                        value="{{system.diceroller.doublesucccesscaps.sevens}}" type="text">
                </div>
                <div>
                    <label class="resource-label">{{localize "Ex3.Eights"}}</label>
                    <input name="system.diceroller.doublesucccesscaps.eights"
                        value="{{system.diceroller.doublesucccesscaps.eights}}" type="text">
                </div>
                <div>
                    <label class="resource-label">{{localize "Ex3.Nines"}}</label>
                    <input name="system.diceroller.doublesucccesscaps.nines"
                        value="{{system.diceroller.doublesucccesscaps.nines}}" type="text">
                </div>
                <div>
                    <label class="resource-label">{{localize "Ex3.Tens"}}</label>
                    <input name="system.diceroller.doublesucccesscaps.tens"
                        value="{{system.diceroller.doublesucccesscaps.tens}}" type="text">
                </div>
            </div>
            <div class="resource grid grid-2col flex-center">
                <div>
                    <div class="resource-label">{{localize "Ex3.TriggerOnTens"}}</div>
                    <select name="system.diceroller.triggerontens" data-type="String">
                        {{#select system.diceroller.triggerontens}}
                        <option value="none">{{localize "Ex3.Nothing"}}</option>
                        <option value="damage">{{localize "Ex3.Damage"}}</option>
                        <option value="extraSuccess">{{localize "Ex3.ExtraSuccess"}}</option>
                        <option value="ignoreHardness">{{localize "Ex3.IgnoreHardness"}}</option>
                        <option value="postSoakDamage">{{localize "Ex3.PostSoakDamage"}}</option>
                        <option value="rerolllDie">{{localize "Ex3.RerollDie"}}</option>
                        <option value="restoreMote">{{localize "Ex3.RestoreMote"}}</option>
                        {{/select}}
                    </select>
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.TriggerTensCap"}}</div>
                    <input name="system.diceroller.triggertenscap" value="{{system.diceroller.triggertenscap}}"
                        type="text">
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.ExcludeOnesFromRerolls"}}</div>
                    <input name="system.diceroller.excludeonesfromrerolls"
                        value="system.diceroller.excludeonesfromrerolls" type="checkbox" {{checked
                        system.diceroller.excludeonesfromrerolls}}>
                </div>
            </div>
            <div class="flex-center resource-label" style="font-weight: bold;font-size:17px;">
                {{localize "Ex3.Damage"}}
            </div>
            <div>
                <div class="resource grid grid-3col flex-center">
                    <div>
                        <label class="resource-label">{{localize "Ex3.DamageDice"}}*</label>
                        <input type="text" name="system.diceroller.damage.bonusdice"
                            value="{{system.diceroller.damage.bonusdice}}">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.DamageSuccesses"}}*</label>
                        <input type="text" name="system.diceroller.damage.bonussuccesses"
                            value="{{system.diceroller.damage.bonussuccesses}}">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.DoubleSuccess"}} + </label>
                        <input type="number" name="system.diceroller.damage.doublesuccess"
                            value="{{system.diceroller.damage.doublesuccess}}">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.DecreaseTargetNumber"}} </label>
                        <input type="number" name="system.diceroller.damage.decreasetargetnumber"
                            value="{{system.diceroller.damage.decreasetargetnumber}}">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.RerollNumDice"}}*</label>
                        <input name="system.diceroller.damage.rerolldice"
                            value="{{system.diceroller.damage.rerolldice}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.RerollFailed"}} </label>
                        <div>
                            <input type="checkbox" name="system.diceroller.damage.rerollfailed"
                                value="system.diceroller.damage.rerollfailed" {{checked
                                system.diceroller.damage.rerollfailed}}>
                        </div>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.RollTwiceKeepHighest"}} </label>
                        <div>
                            <input type="checkbox" name="system.diceroller.damage.rolltwice"
                                value="system.diceroller.damage.rolltwice" {{checked
                                system.diceroller.damage.rolltwice}}>
                        </div>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Overwhelming"}}*</label>
                        <input type="text" name="system.diceroller.damage.overwhelming"
                            value="{{system.diceroller.damage.overwhelming}}">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.PostSoakDamage"}}*</label>
                        <input type="text" name="system.diceroller.damage.postsoakdamage"
                            value="{{system.diceroller.damage.postsoakdamage}}">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.IgnoreSoak"}}*</label>
                        <input type="text" name="system.diceroller.damage.ignoresoak"
                            value="{{system.diceroller.damage.ignoresoak}}">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.ThreshholdToDamage"}} </label>
                        <div>
                            <input type="checkbox" name="system.diceroller.damage.threshholdtodamage"
                                value="system.diceroller.damage.threshholdtodamage" {{checked
                                system.diceroller.damage.threshholdtodamage}}>
                        </div>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.DoubleRolledDamage"}} </label>
                        <div>
                            <input type="checkbox" name="system.diceroller.damage.doublerolleddamage"
                                value="system.diceroller.damage.doublerolleddamage" {{checked
                                system.diceroller.damage.doublerolleddamage}}>
                        </div>
                    </div>
                </div>
                <div class="resource flex-center">
                    <label class="resource-label">{{localize "Ex3.Reroll"}}</label>
                </div>
                <div class="resource d-flex flex-center">
                    <div>
                        <div>1</div>
                        <input name="system.diceroller.damage.reroll.one" value="system.diceroller.damage.reroll.one"
                            type="checkbox" {{checked system.diceroller.damage.reroll.one}}>
                    </div>
                    <div>
                        <div>2</div>
                        <input name="system.diceroller.damage.reroll.two" value="system.diceroller.damage.reroll.two"
                            type="checkbox" {{checked system.diceroller.damage.reroll.two}}>
                    </div>
                    <div>
                        <div>3</div>
                        <input name="system.diceroller.damage.reroll.three"
                            value="system.diceroller.damage.reroll.three" type="checkbox" {{checked
                            system.diceroller.damage.reroll.three}}>
                    </div>
                    <div>
                        <div>4</div>
                        <input name="system.diceroller.damage.reroll.four" value="system.diceroller.damage.reroll.four"
                            type="checkbox" {{checked system.diceroller.damage.reroll.four}}>
                    </div>
                    <div>
                        <div>5</div>
                        <input name="system.diceroller.damage.reroll.five" value="system.diceroller.damage.reroll.five"
                            type="checkbox" {{checked system.diceroller.damage.reroll.five}}>
                    </div>
                    <div>
                        <div>6</div>
                        <input name="system.diceroller.damage.reroll.six" value="system.diceroller.damage.reroll.six"
                            type="checkbox" {{checked data.damage.reroll.six}}>
                    </div>
                    <div>
                        <div>7</div>
                        <input name="system.diceroller.damage.reroll.seven"
                            value="system.diceroller.damage.reroll.seven" type="checkbox" {{checked
                            system.diceroller.damage.reroll.seven}}>
                    </div>
                    <div>
                        <div>8</div>
                        <input name="system.diceroller.damage.reroll.eight"
                            value="system.diceroller.damage.reroll.eight" type="checkbox" {{checked
                            system.diceroller.damage.reroll.eight}}>
                    </div>
                    <div>
                        <div>9</div>
                        <input name="system.diceroller.damage.reroll.nine" value="system.diceroller.damage.reroll.nine"
                            type="checkbox" {{checked system.diceroller.damage.reroll.nine}}>
                    </div>
                    <div>
                        <div>10</div>
                        <input name="system.diceroller.damage.reroll.ten" value="system.diceroller.damage.reroll.ten"
                            type="checkbox" {{checked system.diceroller.damage.reroll.ten}}>
                    </div>
                </div>
                <div class="resource flex-center">
                    <label class="resource-label">{{localize "Ex3.RerollsCap"}}</label>
                </div>
                <div class="resource d-flex flex-center mb-1">
                    <div class="resource d-flex flex-center">
                        <div>
                            <div>1</div>
                            <input name="system.diceroller.damage.rerollcap.one"
                                value="{{system.diceroller.damage.rerollcap.one}}" type="text">
                        </div>
                        <div>
                            <div>2</div>
                            <input name="system.diceroller.damage.rerollcap.two"
                                value="{{system.diceroller.damage.rerollcap.two}}" type="text">
                        </div>
                        <div>
                            <div>3</div>
                            <input name="system.diceroller.damage.rerollcap.three"
                                value="{{system.diceroller.damage.rerollcap.three}}" type="text">
                        </div>
                        <div>
                            <div>4</div>
                            <input name="system.diceroller.damage.rerollcap.four"
                                value="{{system.diceroller.damage.rerollcap.four}}" type="text">
                        </div>
                        <div>
                            <div>5</div>
                            <input name="system.diceroller.damage.rerollcap.five"
                                value="{{system.diceroller.damage.rerollcap.five}}" type="text">
                        </div>
                        <div>
                            <div>6</div>
                            <input name="system.diceroller.damage.rerollcap.six"
                                value="{{system.diceroller.damage.rerollcap.six}}" type="text">
                        </div>
                        <div>
                            <div>7</div>
                            <input name="system.diceroller.damage.rerollcap.seven"
                                value="{{system.diceroller.damage.rerollcap.seven}}" type="text">
                        </div>
                        <div>
                            <div>8</div>
                            <input name="system.diceroller.damage.rerollcap.eight"
                                value="{{system.diceroller.damage.rerollcap.eight}}" type="text">
                        </div>
                        <div>
                            <div>9</div>
                            <input name="system.diceroller.damage.rerollcap.nine"
                                value="{{system.diceroller.damage.rerollcap.nine}}" type="text">
                        </div>
                        <div>
                            <div>10</div>
                            <input name="system.diceroller.damage.rerollcap.ten"
                                value="{{system.diceroller.damage.rerollcap.ten}}" type="text">
                        </div>
                    </div>
                </div>
                <div class="resource flex-center">
                    <label class="resource-label">{{localize "Ex3.DoubleSuccessCap"}}</label>
                </div>
                <div class="resource grid grid-4col flex-center">
                    <div>
                        <label class="resource-label">{{localize "Ex3.Sevens"}}</label>
                        <input name="system.diceroller.damage.doublesucccesscaps.sevens"
                            value="{{system.diceroller.damage.doublesucccesscaps.sevens}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Eights"}}</label>
                        <input name="system.diceroller.damage.doublesucccesscaps.eights"
                            value="{{system.diceroller.damage.doublesucccesscaps.eights}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Nines"}}</label>
                        <input name="system.diceroller.damage.doublesucccesscaps.nines"
                            value="{{system.diceroller.damage.doublesucccesscaps.nines}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Tens"}}</label>
                        <input name="system.diceroller.damage.doublesucccesscaps.tens"
                            value="{{system.diceroller.damage.doublesucccesscaps.tens}}" type="text">
                    </div>
                </div>
                <div class="resource grid grid-2col flex-center">
                    <div>
                        <div class="resource-label">{{localize "Ex3.TriggerOnTens"}}</div>
                        <select name="system.diceroller.damage.triggerontens" data-type="String">
                            {{#select system.diceroller.damage.triggerontens}}
                            <option value="none">{{localize "Ex3.Nothing"}}</option>
                            <option value="subtractTargetInitiative">{{localize "Ex3.SubtractTargetInitiative"}}</option>
                            {{/select}}
                        </select>
                    </div>
                    <div>
                        <div class="resource-label">{{localize "Ex3.TriggerTensCap"}}</div>
                        <input name="system.diceroller.damage.triggertenscap" value="{{system.diceroller.damage.triggertenscap}}"
                            type="text">
                    </div>
                    <div>
                        <div class="resource-label">{{localize "Ex3.ExcludeOnesFromRerolls"}}</div>
                        <input name="system.diceroller.damage.excludeonesfromrerolls"
                            value="system.diceroller.damage.excludeonesfromrerolls" type="checkbox" {{checked
                            system.diceroller.damage.excludeonesfromrerolls}}>
                    </div>
                </div>
            </div>
            <div class="flex-center resource-label" style="font-weight: bold;font-size:17px;">
                {{localize "Ex3.OtherBonuses"}}
            </div>
            <div class="resource grid grid-2col flex-center">
                <div>
                    <div class="resource-label">{{localize "Ex3.ActivateAura"}}</div>
                    <select name="system.diceroller.activateAura" data-type="String">
                        {{#select system.diceroller.activateAura}}
                        <option value="none">{{localize "Ex3.None"}}</option>
                        <option value="air">{{localize "Ex3.Air"}}</option>
                        <option value="earth">{{localize "Ex3.Earth"}}</option>
                        <option value="fire">{{localize "Ex3.Fire"}}</option>
                        <option value="water">{{localize "Ex3.Water"}}</option>
                        <option value="wood">{{localize "Ex3.Wood"}}</option>
                        {{/select}}
                    </select>
                </div>
            </div>
            <hr>
            <div class="d-flex flex-center resource-label" style="font-weight: bold;font-size: 17px;">
                <div>
                    {{localize "Ex3.OpposedBonuses"}}
                </div>
                <input name="system.diceroller.opposedbonuses.enabled" value="system.diceroller.opposedbonuses.enabled"
                    type="checkbox" {{checked system.diceroller.opposedbonuses.enabled}}>
            </div>
            <div>
                <div class="resource grid grid-3col flex-center">
                    <div>
                        <label class="resource-label">{{localize "Ex3.DiceModifier"}}*</label>
                        <input name="system.diceroller.opposedbonuses.dicemodifier"
                            value="{{system.diceroller.opposedbonuses.dicemodifier}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.SuccessModifier"}}*</label>
                        <input name="system.diceroller.opposedbonuses.successmodifier"
                            value="{{system.diceroller.opposedbonuses.successmodifier}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Resolve"}}*</label>
                        <input name="system.diceroller.opposedbonuses.resolve"
                            value="{{system.diceroller.opposedbonuses.resolve}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Guile"}}*</label>
                        <input name="system.diceroller.opposedbonuses.guile"
                            value="{{system.diceroller.opposedbonuses.guile}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.IncreaseTargetNumber"}}</label>
                        <input name="system.diceroller.opposedbonuses.increasetargetnumber"
                            value="{{system.diceroller.opposedbonuses.increasetargetnumber}}" type="number">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Defense"}}*</label>
                        <input name="system.diceroller.opposedbonuses.defense"
                            value="{{system.diceroller.opposedbonuses.defense}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Soak"}}*</label>
                        <input name="system.diceroller.opposedbonuses.soak"
                            value="{{system.diceroller.opposedbonuses.soak}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.Hardness"}}*</label>
                        <input name="system.diceroller.opposedbonuses.hardness"
                            value="{{system.diceroller.opposedbonuses.hardness}}" type="text">
                    </div>
                    {{#if useShieldInitiative}}
                    <div>
                        <label class="resource-label">{{localize "Ex3.ShieldInitiative"}}*</label>
                        <input name="system.diceroller.opposedbonuses.shieldinitiative"
                            value="{{system.diceroller.opposedbonuses.shieldinitiative}}" type="text">
                    </div>
                    {{/if}}
                    <div>
                        <label class="resource-label">{{localize "Ex3.DamageModifier"}}*</label>
                        <input name="system.diceroller.opposedbonuses.damagemodifier"
                            value="{{system.diceroller.opposedbonuses.damagemodifier}}" type="text">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.IncreaseDamageTN"}}</label>
                        <input name="system.diceroller.opposedbonuses.increasedamagetargetnumber"
                            value="{{system.diceroller.opposedbonuses.increasedamagetargetnumber}}" type="number">
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.IncreaseGambitDifficulty"}}*</label>
                        <input name="system.diceroller.opposedbonuses.increasegambitdifficulty"
                            value="{{system.diceroller.opposedbonuses.increasegambitdifficulty}}" type="text">
                    </div>
                </div>
                <div class="resource grid grid-2col flex-center" style="padding-bottom:20px;">
                    <div>
                        <div class="resource-label">{{localize "Ex3.TriggerOnOnes"}}</div>
                        <select name="system.diceroller.opposedbonuses.triggeronones" data-type="String">
                            {{#select system.diceroller.opposedbonuses.triggeronones}}
                            <option value="none">{{localize "Ex3.Nothing"}}</option>
                            <option value="soak">{{localize "Ex3.IncreaseSoak"}}</option>
                            <option value="defense">{{localize "Ex3.IncreaseDefense"}}</option>
                            <option value="subtractInitiative">{{localize "Ex3.SubtractEnemyInitiative"}}</option>
                            <option value="subtractSuccesses">{{localize "Ex3.SubtractEnemySuccesses"}}</option>
                            {{/select}}
                        </select>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "Ex3.TriggerOnesCap"}}*</label>
                        <input name="system.diceroller.opposedbonuses.triggeronescap"
                            value="{{system.diceroller.opposedbonuses.triggeronescap}}" type="text">
                    </div>
                </div>
            </div>
        </div>

        <div class="tab" data-group="primary" data-tab="macros">
            <div class="resource-label list-section-header d-flex flex-between">
                <div>
                    {{localize "Ex3.PreRollMacro"}}
                </div>
            </div>
            <div class="flex-group-center d-flex flex-col">
                <textarea type="text" name="system.prerollmacro" rows="16"
                    placeholder='{{localize "Ex3.PreRollMacroHint"}}'>{{system.prerollmacro}}</textarea>
            </div>
            <div class="resource-label list-section-header d-flex flex-between">
                <div>
                    {{localize "Ex3.Macro"}}
                </div>
            </div>
            <div class="flex-group-center d-flex flex-col">
                <textarea type="text" name="system.macro" rows="16"
                    placeholder='{{localize "Ex3.MacroHint"}}'>{{system.macro}}</textarea>
            </div>
            <div class="resource-label list-section-header d-flex flex-between">
                <div>
                    {{localize "Ex3.DamageMacro"}}
                </div>
            </div>
            <div class="flex-group-center d-flex flex-col flex-fill">
                <textarea class="flex-fill" type="text" name="system.damagemacro" rows="16"
                    placeholder='{{localize "Ex3.DamageMacroHint"}}'>{{system.damagemacro}}</textarea>
            </div>
        </div>

        <div class="tab" data-group="primary" data-tab="other">
            <div class="flex-group-center">
                <label class="resource-label">{{localize "Ex3.Summary"}}</label>
                <textarea type="text" name="system.summary" rows="4">{{system.summary}}</textarea>
            </div>
            <div class="grid grid-3col flex-group-center">
                <div>
                    <div class="resource-label">{{localize "Ex3.CharmType"}}</div>
                    <select name="system.charmtype" data-type="String">
                        {{#select system.charmtype}}
                        <option value="abyssal">{{localize "Ex3.Abyssal"}}</option>
                        <option value="alchemical">{{localize "Ex3.Alchemical"}}</option>
                        <option value="architect">{{localize "Ex3.Architect"}}</option>
                        <option value="dragonblooded">{{localize "Ex3.Dragonblooded"}}</option>
                        <option value="dreamsouled">{{localize "Ex3.DreamSouled"}}</option>
                        <option value="eclipse">{{localize "Ex3.Eclipse"}}</option>
                        <option value="evocation">{{localize "Ex3.Evocation"}}</option>
                        <option value="exigent">{{localize "Ex3.Exigent"}}</option>
                        <option value="getimian">{{localize "Ex3.Getimian"}}</option>
                        <option value="hearteater">{{localize "Ex3.Hearteater"}}</option>
                        <option value="infernal">{{localize "Ex3.Infernal"}}</option>
                        <option value="janest">{{localize "Ex3.Janest"}}</option>
                        <option value="liminal">{{localize "Ex3.Liminal"}}</option>
                        <option value="lunar">{{localize "Ex3.Lunar"}}</option>
                        <option value="martialarts">{{localize "Ex3.MartialArts"}}</option>
                        <option value="sidereal">{{localize "Ex3.Sidereal"}}</option>
                        <option value="solar">{{localize "Ex3.Solar"}}</option>
                        <option value="sovereign">{{localize "Ex3.Sovereign"}}</option>
                        <option value="umbral">{{localize "Ex3.Umbral"}}</option>
                        <option value="other">{{localize "Ex3.Other"}}</option>
                        {{/select}}
                    </select>
                </div>
                <div>
                    <div class="flex-center">
                        <div class="resource-label">{{localize "Ex3.ListingName"}}</div>
                    </div>
                    <input type="text" name="system.listingname" value="{{system.listingname}}"
                        placeholder="Defaults to ability name" />
                </div>
                <div>
                    <div class="resource-label">{{localize "Ex3.EndTrigger"}}</div>
                    <select name="system.endtrigger" data-type="String">
                        {{#select system.endtrigger}}
                        <option value="none">{{localize "Ex3.None"}}</option>
                        <option value="startturn">{{localize "Ex3.StartTurn"}}</option>
                        <option value="endturn">{{localize "Ex3.EndTurn"}}</option>
                        <option value="endscene">{{localize "Ex3.EndScene"}}</option>
                        {{/select}}
                    </select>
                </div>
            </div>
            {{> systems/exaltedthird/templates/actor/active-effects.html}}
        </div>

    </section>
</form>