<div class="sheet-body exaltedthird">
    <div class="flex-center resource-label" style="font-weight: bold;">
        Accuracy
    </div>
    <div>
        {{> systems/exaltedthird/templates/dialogues/ability-base.html}}
        <!-- <div class="d-flex flex-between mb-1 collapsable cursor-pointer">
            <div class="resource-label">
                {{localize "Ex3.AccuracyModifiers"}}
            </div>
            <div>
                <i class="fas fa-caret-down"></i>
            </div>
        </div>
        <div style="display:none;"> -->
        <div class="resource grid grid-2col flex-center">
            <div>
                <label class="resource-label">{{localize "Ex3.Range"}}</label>
                <select name="object.range" value="{{data.range}}" data-type="String">
                    {{selectOptions selects.ranges selected=data.range localize=true}}
                </select>
            </div>
            <div>
                <label class="resource-label">{{localize "Ex3.Weapon"}}</label>
                <select name="object.weaponType" value="{{data.weaponType}}" data-type="String">
                    {{selectOptions selects.weaponTypes selected=data.weaponType localize=true}}
                </select>
            </div>
        </div>
        <!-- </div> -->
        {{#if data.splitAttack}}
        {{else}}
        {{#ifEquals data.rollType 'accuracy'}}
        <div class="resource grid grid-2col flex-center">
            <label class="resource-label">{{localize "Ex3.AttackType"}}:</label>
            <select id="update-damage-type" name="object.attackType" value="{{data.attackType}}" data-type="String">
                {{selectOptions selects.attackTypes selected=data.attackType localize=true}}
            </select>
        </div>
        {{/ifEquals}}
        {{/if}}
        {{#ifEquals data.rollType 'accuracy'}}
        {{#if data.showTargets}}
        {{#ifGreater data.showTargets 1}}
        <div class="d-flex flex-between mb-1 collapsable cursor-pointer">
            <div class="resource-label">
                {{localize "Ex3.Targets"}}
            </div>
            <div>
                <i class="fas fa-caret-down"></i>
            </div>
        </div>
        <div id="targetsDropdown" {{#if data.targetsDropdown}} {{else}} style="display:none;" {{/if}}>
            {{#each data.targets as |target id|}}
            <div style="border-bottom: 1px solid black;margin-bottom: 10px;">
                <div class="d-flex resource flex-center">
                    <div class="mr-1"><img src="{{target.actor.img}}" title="{{target.actor.name}}" width="24"
                            height="24" /></div>
                    <div class="resource-label">{{target.actor.name}}</div>
                </div>
                <div class="resource grid grid-2col flex-center">
                    <div>
                        <div class="flex-center resource-label">
                            {{localize "Ex3.DiceModifier"}}
                        </div>
                        <input type="number" name="object.targets.{{id}}.rollData.diceModifier"
                            value="{{target.rollData.diceModifier}}">
                    </div>
                    <div>
                        <div class="flex-center resource-label">
                            {{localize "Ex3.SuccessModifier"}}
                        </div>
                        <input type="number" name="object.targets.{{id}}.rollData.successModifier"
                            value="{{target.rollData.successModifier}}">
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
        {{else}}
        {{#each data.targets as |target id|}}
        <div style="margin-bottom: 10px;">
            <div class="d-flex resource flex-center">
                <div class="mr-1"><img src="{{target.actor.img}}" title="{{target.actor.name}}" width="24"
                        height="24" /></div>
                <div class="resource-label">{{target.actor.name}}</div>
            </div>
            <div class="resource grid grid-2col flex-center">
                <div>
                    <div class="flex-center resource-label">
                        {{localize "Ex3.DiceModifier"}}
                    </div>
                    <input type="number" name="object.targets.{{id}}.rollData.diceModifier"
                        value="{{target.rollData.diceModifier}}">
                </div>
                <div>
                    <div class="flex-center resource-label">
                        {{localize "Ex3.SuccessModifier"}}
                    </div>
                    <input type="number" name="object.targets.{{id}}.rollData.successModifier"
                        value="{{target.rollData.successModifier}}">
                </div>
                <div>
                    <label class="resource-label">{{localize "Ex3.Defense"}}
                        ({{target.rollData.defenseType}})</label>
                    <input type="number" name="object.targets.{{id}}.rollData.defense"
                        value="{{target.rollData.defense}}">
                </div>
                {{#ifEquals ../data.attackType 'withering'}}
                <div>
                    <div class="flex-center resource-label">
                        {{localize "Ex3.Soak"}} (AS: {{target.rollData.armoredSoak}},
                        NS:{{target.rollData.naturalSoak}})
                    </div>
                    <input type="number" name="object.targets.{{id}}.rollData.soak"
                        value="{{target.rollData.soak}}">
                </div>
                {{/ifEquals}}
            </div>
        </div>
        {{/each}}
        {{/ifGreater}}
        {{/if}}
        {{/ifEquals}}
    </div>
</div>